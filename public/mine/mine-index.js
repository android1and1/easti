// Generated by CoffeeScript 2.3.2
(function() {
  $(function() {
    // 2019-3-3,at Petit Paris.
    // change the mind at 2019-3-4.yao qu da zhen.
    return ['#user-logout', '#admin-logout'].forEach(function(ele) {
      return $(ele).on('click', function(e) {
        var url;
        url = ele.replace(/#/, '/').replace(/\-/, '/');
        $.ajax({
          url: url,
          // in fact ,there is an error,not 'method',should be 'type'
          method: 'PUT',
          // in fact ,there is an error,not 'responseType',should be 'dataType'
          responseType: 'json'
        }).done(function(json) {
          //in fact,there is an error,when client's role not as it said(logout),ajax will not fail,but case the 'else' case 
          if (json.code === 0) {
            alert(json.status);
            return $(ele).parent().addClass('disabled');
          } else {
            return alert(json.status + ' reason: ' + json.reason);
          }
        }).fail(function(xhr, status, thrown) {
          console.log(status);
          return console.log(thrown);
        });
        e.preventDefault();
        return e.stopPropagation();
      });
    });
  });

}).call(this);
