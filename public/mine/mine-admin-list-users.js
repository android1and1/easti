// Generated by CoffeeScript 2.3.2
(function() {
  $(function() {
    return $('.disablebutton').on('click', function(e) {
      var button, id, thisbutton;
      thisbutton = this;
      id = $(this).data('userid');
      // give a chance for ensure.
      button = $('<button/>', {
        'id': 'clickensure',
        'class': 'btn btn-danger btn-md',
        'text': 'Clike To Disable This Account',
        'data-dismiss': 'modal'
      });
      window.createModal($('body'), {
        'boxid': 'ensurefordisable',
        'funcButton': button,
        'titleText': 'Are You Sure To Disable This Account?',
        'bodyText': 'after disable,user cannot access its account till admin enable it.'
      });
      $('#ensurefordisable').modal();
      // really do ajax.
      return $('#clickensure').on('click', function(e) {
        return $.ajax({
          url: '/admin/disable-user',
          type: 'POST',
          dataType: 'json',
          data: {
            id: id
          }
        }).done(function(json) {
          if (json.code === 0) {
            // button give a animal-action. 
            return $(thisbutton).hide('slow');
          }
        }).fail(function(one, two, three) {
          return console.log('status code:', two);
        });
      });
    });
  });

}).call(this);
