// Generated by CoffeeScript 2.1.1
(function() {
  // 2019-1-8/9
  $(function() {
    $('button.delete').on('click', function(e) {
      var $button, id;
      // how do i know the id which item should delete?
      id = $(this).data('delete-id');
      // keep @ value because async func will lost it.
      $button = $(this);
      return $.ajax({
        type: 'DELETE',
        url: '/neighborCar/delete/' + id,
        // we expecting response type
        dataType: 'json'
      }).done(function(json) {
        return $button.parents('.panel.panel-default').slideUp('slow', function() {
          return window.createAlertBox($('#billboard'), json.status);
        });
      }).fail(function(reason) {
        return alert(reason);
      });
    });
    //.always ->
    //  alert 'has trigger AJAX-DELETE.'
    $('button.vote').on('click', function(e) {
      var id;
      
      // how do i know the id which item should vote?
      id = $(this).data('vote-id');
      return $.ajax({
        type: 'PUT',
        url: '/neighborCar/vote/' + id,
        dataType: 'json'
      }).done(function(json) {
        //alert JSON.stringify json 
        return window.createAlertBox($('#billboard'), json.status);
      }).fail(function(reason) {
        return alert(reason);
      }).always(function() {
        return alert('has trigger AJAX-PUT.');
      });
    });
    $('button.edit').on('click', function(e) {
      return alert('edit button be triggered.');
    });
    return $('#search-form').on('submit', function(evt) {
      var way;
      way = $('[name=keyword-for]:checked').val();
      if (way === void 0 || way === null) {
        return $(this).attr('action', '/neighborCar/find-by-license-plate-number');
      } else {
        return $(this).attr('action', '/neighborCar/' + way);
      }
    });
  });

  
// let html form do its default submmitting.so disabled below 2 lines. 
// evt.preventDefault()
// evt.stopPropagation()

}).call(this);
